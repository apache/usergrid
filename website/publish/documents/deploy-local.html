

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying to local Tomcat &amp; Cassandra &mdash; Apache Usergrid 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Apache Usergrid 1.0 documentation" href="index.html"/>
        <link rel="next" title="Getting Up &amp; Running Locally" href="getting-up-and-running-locally.html"/>
        <link rel="prev" title="Apache Usergrid Documents" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Apache Usergrid</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Deploying to local Tomcat &amp; Cassandra</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-and-configure-cassandra">Install and configure Cassandra</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-and-configure-tomcat">Install and configure Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-usergrid-war-to-tomcat">Add Usergrid WAR to Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-usergrid-configuration-file-to-tomcat">Add Usergrid configuration file to Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-usergrid-database-super-user-setup">Run Usergrid Database &amp; Super User Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-the-usergrid-console">Build the Usergrid Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="#login-to-the-usergrid-console-get-started">Login to the Usergrid Console &amp; get started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-usergrid-custom-properties-file">Example <strong>usergrid-custom.properties</strong> file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-up-and-running-locally.html">Getting Up &amp; Running Locally</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-up-and-running-locally.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-up-and-running-locally.html#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-up-and-running-locally.html#running">Running</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-up-and-running-locally.html#getting-started-with-the-http-api">Getting Started with the HTTP API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="organizations-admins.html">Organizations &amp; Admins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concepts/applications.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/events-and-counters.html">Events and counters</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/roles-and-permissions.html">Roles &amp; Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/relationships.html">Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/collections.html">Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/query-language.html">Query Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/users-devices.html">Users &amp; Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/groups.html">Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/activity.html">Activity</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts/assets.html">Assets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">SDKs &amp; Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#sdks">SDKs</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#tools">Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="presentations-and-videos.html">Presentations &amp; Videos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="presentations-and-videos/presentations.html">Presentations</a></li>
<li class="toctree-l2"><a class="reference internal" href="presentations-and-videos/videos.html">Videos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading from Previous Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute-code.html">How to Contribute Code &amp; Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute-code.html#code-contributions">Code Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute-code.html#website-and-documentation-contributions">Website and Documentation Contributions</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Apache Usergrid</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Deploying to local Tomcat &amp; Cassandra</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/deploy-local.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="deploying-to-local-tomcat-cassandra">
<h1>Deploying to local Tomcat &amp; Cassandra<a class="headerlink" href="#deploying-to-local-tomcat-cassandra" title="Permalink to this headline">¶</a></h1>
<p>This is a guide that explains how to install and run Usergrid using
stock Tomcat and Cassandra on a single computer.</p>
<p>NOTE: running Cassandra on a single computer is something you should do
ONLY for testing purposes. You don&#8217;t want to run one node in production
even just to start out. To get the benefit of Cassandra&#8217;s architecture,
which is designed to support linear scalability. You should be running a
Cassandra cluster with at least three nodes.</p>
<p>For more information:</p>
<ul class="simple">
<li><a class="reference external" href="http://planetcassandra.org/blog/post/cassandra-faq-can-i-start-with-a-single-node/">Cassandra FAQ: Can I Start With a Single
Node?</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/18462530/why-dont-you-start-off-with-a-single-small-cassandra-server-as-you-usually">Why don&#8217;t you start off with a “single &amp; small” Cassandra
server</a></li>
</ul>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK
1.7</a></li>
<li><a class="reference external" href="http://maven.apache.org/">Maven</a></li>
</ul>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>Use GitHub to clone the
<a class="reference external" href="https://github.com/apache/incubator-usergrid">apache/incubator-usergrid</a>
repo.</p>
<p>Or you can start by <a class="reference external" href="https://github.com/apache/incubator-usergrid/archive/master.zip">downloading our latest
code</a>
and extract it.</p>
</div>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>From the command line, navigate to <tt class="docutils literal"><span class="pre">stack</span></tt> directory and type the
following:</p>
<div class="highlight-python"><div class="highlight"><pre>mvn clean package -DskipTests=true
</pre></div>
</div>
<p>Once you are done the Usergrid application will be package as a Java EE
WAR file at the location <strong>stack/rest/target/ROOT.war</strong>.</p>
</div>
<div class="section" id="install-and-configure-cassandra">
<h2>Install and configure Cassandra<a class="headerlink" href="#install-and-configure-cassandra" title="Permalink to this headline">¶</a></h2>
<p>Install Cassandra, don&#8217;t edit configuration files as we just want
default values for this simple setup. Here are the <a class="reference external" href="http://wiki.apache.org/cassandra/GettingStarted">instructions for
installing
Cassandra</a></p>
</div>
<div class="section" id="install-and-configure-tomcat">
<h2>Install and configure Tomcat<a class="headerlink" href="#install-and-configure-tomcat" title="Permalink to this headline">¶</a></h2>
<p>Follow instructions, don&#8217;t edit configuration files as we just want
default values for this simple setup. Here are the <a class="reference external" href="http://tomcat.apache.org/tomcat-7.0-doc/setup.html">instructions for
installing Tomcat
7</a></p>
</div>
<div class="section" id="add-usergrid-war-to-tomcat">
<h2>Add Usergrid WAR to Tomcat<a class="headerlink" href="#add-usergrid-war-to-tomcat" title="Permalink to this headline">¶</a></h2>
<p>Remove the existing <tt class="docutils literal"><span class="pre">tomcat/webapps/ROOT</span></tt> directory.</p>
<p>Place the Usergrid <tt class="docutils literal"><span class="pre">ROOT.war</span></tt> file into the <tt class="docutils literal"><span class="pre">tomcat/webapps</span></tt>
directory</p>
</div>
<div class="section" id="add-usergrid-configuration-file-to-tomcat">
<h2>Add Usergrid configuration file to Tomcat<a class="headerlink" href="#add-usergrid-configuration-file-to-tomcat" title="Permalink to this headline">¶</a></h2>
<p>Create a ____usergrid-custom.properties____ file and place it in
Tomcat&#8217;s <strong>lib</strong> directory. You can find an example properties file
below that should work well for a local Tomcat &amp; Cassandra setup. You
will probably only need to change the properties below to use your email
address and preferred password for the install.</p>
<div class="highlight-python"><div class="highlight"><pre>usergrid.sysadmin.login.allowed=true
usergrid.sysadmin.login.name=superuser
usergrid.sysadmin.login.password=pw123
usergrid.sysadmin.email=me@example.com
usergrid.sysadmin.login.email=myself@example.com
usergrid.management.mailer=Myself&lt;myself@example.com&gt;
usergrid.test-account.admin-user.email=myself@example.com
usergrid.test-account.admin-user.password=test
</pre></div>
</div>
</div>
<div class="section" id="run-usergrid-database-super-user-setup">
<h2>Run Usergrid Database &amp; Super User Setup<a class="headerlink" href="#run-usergrid-database-super-user-setup" title="Permalink to this headline">¶</a></h2>
<p>Start Tomcat and use your web browser to visit the URLs below. While you
do this you might want to watch the logs under tomcat/logs for clues,
just in case anything goes wrong.</p>
<p>Database setup URL - <a class="reference external" href="http://localhost:8080/system/database/setup">http://localhost:8080/system/database/setup</a></p>
<p>When prompted to login use the sysadmin credentials that you specified
in your <strong>usergrid-custom.properties</strong> file. Based on the example above
that would be superuser and pw123. If the operation is successful you
should a message like the one below in your browser. If not, check your
logs for clues about what went wrong.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;action&quot;</span> <span class="p">:</span> <span class="s">&quot;cassandra setup&quot;</span><span class="p">,</span>
  <span class="s">&quot;status&quot;</span> <span class="p">:</span> <span class="s">&quot;ok&quot;</span><span class="p">,</span>
  <span class="s">&quot;timestamp&quot;</span> <span class="p">:</span> <span class="mi">1379424622947</span><span class="p">,</span>
  <span class="s">&quot;duration&quot;</span> <span class="p">:</span> <span class="mi">76</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Superuser setup URL - <a class="reference external" href="http://localhost:8080/system/superuser/setup">http://localhost:8080/system/superuser/setup</a></p>
<p>You should not be prompted for login because you already logged into for
the Database Setup. If setup works, you should see a message like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;action&quot;</span> <span class="p">:</span> <span class="s">&quot;superuser setup&quot;</span><span class="p">,</span>
  <span class="s">&quot;status&quot;</span> <span class="p">:</span> <span class="s">&quot;ok&quot;</span><span class="p">,</span>
  <span class="s">&quot;timestamp&quot;</span> <span class="p">:</span> <span class="mi">1379424667936</span><span class="p">,</span>
  <span class="s">&quot;duration&quot;</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="build-the-usergrid-console">
<h2>Build the Usergrid Console<a class="headerlink" href="#build-the-usergrid-console" title="Permalink to this headline">¶</a></h2>
<p>The Usergrid Console is an admin interface written in JavaScript that
connects to your running Usergrid instance. For evaluation purposes, you
can run it within Tomcat. Build it by following the steps
<a class="reference external" href="https://github.com/apache/incubator-usergrid/blob/master/portal/README.md">here</a>.
Once built, copy the directory <em>portal/build/usergrid-portal</em> to
<em>tomcat/webapps</em>.</p>
</div>
<div class="section" id="login-to-the-usergrid-console-get-started">
<h2>Login to the Usergrid Console &amp; get started<a class="headerlink" href="#login-to-the-usergrid-console-get-started" title="Permalink to this headline">¶</a></h2>
<p>You should now be able to login to the Usergrid console and start
configuring applications, users and more.</p>
<p>You can use an static version of the portal to get started:</p>
<p><a class="reference external" href="http://localhost:8080/usergrid-portal/(http://localhost:8080/usergrid-portal">http://localhost:8080/usergrid-portal/(http://localhost:8080/usergrid-portal</a>)</p>
</div>
<div class="section" id="example-usergrid-custom-properties-file">
<h2>Example <strong>usergrid-custom.properties</strong> file<a class="headerlink" href="#example-usergrid-custom-properties-file" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s a complete example properties file to get you started.</p>
<div class="highlight-python"><div class="highlight"><pre># Minimal Usergrid configuration properties for local Tomcat and Cassandra
#
# The cassandra configuration options.

# The cassandra host to use
cassandra.url=localhost:9160

# The strategy to use when creating the keyspace. This is the default.
# We recommend creating the keyspace with this default, then editing it
# via the cassandra CLI to meet the client&#39;s needs.
cassandra.keyspace.strategy=org.apache.cassandra.locator.SimpleStrategy

# The default replication factor for the simple strategy. Again, leave the
# default, create the app, then use the cassandra cli to set the replication
# factor options. This can become complicated with different topologies and
# is more a Cassandra administration issue than a UG issue.
cassandra.keyspace.strategy.options.replication_factor=1

######################################################
# Custom mail transport. Not usually used for local testing

#mail.transport.protocol=smtps
#mail.smtps.host=email-smtp.us-east-1.amazonaws.com
#mail.smtps.port=465
#mail.smtps.auth=true
#mail.smtps.quitwait=false
#mail.smtps.username=
#mail.smtps.password=

######################################################
# Admin and test user setup (change these to be their super user

usergrid.sysadmin.login.name=superuser
usergrid.sysadmin.login.email=myself@example.com     &lt;--- Change this
usergrid.sysadmin.login.password=pw123               &lt;--- Change this
usergrid.sysadmin.login.allowed=true
usergrid.sysadmin.email=myself@example.com           &lt;--- Change this

# Enable or disable this to require superadmin approval of users
usergrid.sysadmin.approve.users=false

######################################################
# Auto-confirm and sign-up notifications settings

usergrid.management.admin_users_require_confirmation=false
usergrid.management.admin_users_require_activation=false
usergrid.management.organizations_require_activation=false
usergrid.management.notify_sysadmin_of_new_organizations=false
usergrid.management.notify_sysadmin_of_new_admin_users=false

######################################################
# URLs
# Redirect path when request come in for TLD

usergrid.redirect_root=https://localhost:8080/status
usergrid.view.management.organizations.organization.activate=https://localhost:8080/accounts/welcome
usergrid.view.management.organizations.organization.confirm=https://localhost:8080/accounts/welcome
usergrid.view.management.users.user.activate=https://localhost:8080/accounts/welcome
usergrid.view.management.users.user.confirm=https://localhost:8080/accounts/welcome
usergrid.organization.activation.url=https://localhost:8080/management/organizations/%s/activate
usergrid.admin.activation.url=https://localhost:8080/management/users/%s/activate
usergrid.admin.resetpw.url=https://localhost:8080/management/users/%s/resetpw
usergrid.admin.confirmation.url=https://localhost:8080/management/users/%s/confirm
usergrid.user.activation.url=https://localhost:8080%s/%s/users/%s/activate
usergrid.user.confirmation.url=https://localhost:8080/%s/%s/users/%s/confirm
usergrid.user.resetpw.url=https://localhost:8080/%s/%s/users/%s/resetpw
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting-up-and-running-locally.html" class="btn btn-neutral float-right" title="Getting Up &amp; Running Locally">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Apache Usergrid Documents"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2014, Apache Usergrid.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>