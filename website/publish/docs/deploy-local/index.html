<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Apache Usergrid (incubating) — Deploy to local Tomcat & Cassandra</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta name="keywords" content="Apache Usergrid, Usergrid, BaaS, Backend-as-a-Service">
    <meta name="description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <meta property="og:title" content="Apache Usergrid" />
    <meta property="og:description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <!-- Loading Typekit -->
    <script type="text/javascript" src="//use.typekit.net/ddl7izx.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <!-- Loading Bootstrap -->
    <link href="/bootstrap/bootstrap.min.css" rel="stylesheet" type='text/css'>
    <link href="/css/bootflat.css" rel="stylesheet" type='text/css'>
    <link href="/css/usergrid-site.css" rel="stylesheet" type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,400,500,300,600,800,700,400italic,600italic,700italic,800italic,300italic" rel="stylesheet" type="text/css">
    <link href="/css/font-awesome.min.css" rel="stylesheet" type='text/css'>

    

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    <header class="navbar navbar-inverse navbar-fixed-top bf-docs-nav secondary" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bf-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <a href="/" class="navbar-brand">
                <img id="home-logo" src="/img/apache_usergrid_logo_white_small.png" />
            </a>
        <nav class="collapse navbar-collapse bf-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                <li class=""><a href="/community/"><span class="icns icon-group"></span></a></li>
                <li><a href="http://usergrid.readthedocs.org/" target="_blank"><span class="icns icon-book"></span></a></li>
                <li><a href="http://github.com/apache/incubator-usergrid" target="_blank"><span class="icns icon-github-sign"></span></a></li>
                <!--<li><a href="https://trello.com/b/exQmJIOn/usergrid" target="_blank"><span class="icns icon-trello"></span></a></li>-->
                <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank"><span class="icns icon-bug"></span></a></li>
                <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank"><span class="icns icon-stackexchange"></span></a></li>
                <li><a href="/community/#live"><span class="icns icon-comments"></span></a></li>
                <!--<li><a href="https://groups.google.com/forum/#!forum/usergrid" target="_blank"><span class="icns icon-envelope"></span></a></li>-->
                <li><a href="https://twitter.com/usergrid" target="_blank"><span class="icns icon-twitter"></span></a></li>
                <li><a href="https://cwiki.apache.org/confluence/display/usergrid/" target="_blank"><span class="icns icon-wiki"></span></a></li>
                <li><a href="/releases/"><span class="icns icon-releases"></span></a></li>
            </ul>
        </nav>
    </div>
    </header>



<div class="container bf-docs-container">    
    <div class="row">
        <div class="col-md-3">
            <div class="bf-sidebar hidden-print" role="complementary">
                <ul class="nav nav-list">
                    <li><a href="/docs/getting-up-and-running-locally/">Getting Up &amp; Running Locally</a></li>
                    <li><a href="/docs/deploy-local/">Deploying to local Tomcat &amp; Cassandra</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/ugc#usergrid-command-line-ugc"><code>ugc</code> — the Command-line Client</a></li>

                    <li class="nav-header"><span>Concepts</span></li>
                    <li>
                        <a href="/docs/organizations-admins/">Organizations & Admins</a>
                        <ul>
                            <li>
                                <a href="/docs/applications/">Applications</a>
                                <ul>
                                    <li><a href="/docs/roles-and-permissions/">Roles & Permissions</a></li>
                                    <!--<li><a href="#">Queues</a></li>-->
                                    <li><a href="/docs/events-and-counters/">Events & Counters</a></li>
                                    <li><a href="/docs/relationships/">Relationships (Joins)</a></li>
                                    <li>
                                        <a href="/docs/collections">Collections</a>
                                        <ul>
                                            <li><a href="/docs/query-language/">Query Language</a></li>
                                            <li><a href="/docs/users-devices/">Users & Devices</a></li>
                                            <li><a href="/docs/groups/">Groups</a></li>
                                            <li><a href="/docs/activities/">Activities</a></li>
                                            <li><a href="/docs/assets/">Assets</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>


                    <li class="nav-header"><span>Usage</span></li>
                    <!-- <li>REST API — Coming Soon</li> -->
                    <li><a class="icns-apple" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ios">iOS SDK</a></li>
                    <li><a class="icns-android" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/android">Android SDK</a></li>
                    <li><a class="icns-html5" href="">HTML5 / JavaScript SDK</a></li>
                    <li><a class="icns-windows" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/dotnet">Windows 8 / Windows Phone / .net SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/nodejs">Node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby-on-rails">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/php">PHP library</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/java">Java library</a></li>

                    <!--<li class="nav-header"><span>Internals</span></li>
                    <li>Design & Goals — Coming Soon</li>
                    <li>Java Architecture — Coming Soon</li>
                    <li>Cassandra Schema — Coming Soon</li>-->

                    <li class="nav-header"><span>Operations</span></li>
                    <!--<li>Deploying — Coming Soon</li>-->
                    <!-- <li>Monitoring — Coming Soon</li> -->
                    <li><a href="/docs/upgrading/">Upgrading</a></li>
                    <!-- <li>Security — Coming Soon</li> -->

                    <li class="nav-header"><span>Presentations & Videos</span></li>
                    <li><a href="/docs/presentations/">Presentations</a></li>
                    <li><a href="/docs/videos/">Videos</a></li>

                    <li class="nav-header"><span>We need your help!</span></li>
                    <li><a href="/docs/contribute-code/">How to Contribute Code & Docs</a></li>
                    <!--
                    <li><a href="/docs/contribute-docs">How to contribute docs</a></li>
                    -->
                </ul>
            </div>
        </div>

        <div class="col-md-9 main-article" role="main">
            <div class="page-article">
                <div class="page-header">
                    <h1>Deploy to local Tomcat & Cassandra</h1>
                    <!-- TODO: reenable this when we sync SVN to GitHub
                  <small><a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/deploy-local.md">contribute to this article on github</a></small>
                    -->
                </div>
                <div class="toc">
	<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#building">Building</a></li>
<li><a href="#install-and-configure-cassandra">Install and configure Cassandra</a></li>
<li><a href="#install-and-configure-tomcat">Install and configure Tomcat</a></li>
<li><a href="#add-usergrid-war-to-tomcat">Add Usergrid WAR to Tomcat</a></li>
<li><a href="#add-usergrid-configuration-file-to-tomcat">Add Usergrid configuration file to Tomcat</a></li>
<li><a href="#run-usergrid-database-super-user-setup">Run Usergrid Database &amp; Super User Setup</a></li>
<li><a href="#login-to-the-usergrid-console-get-started">Login to the Usergrid Console &amp; get started</a></li>
<li><a href="#example-usergrid-deployment.properties-file">Example usergrid-deployment.properties file</a></li>
</ul>
</div>
<p>This is a guide that explains how to install and run Usergrid using stock Tomcat and Cassandra on a single computer.</p>
<p>NOTE: running Cassandra on a single computer is something you should do ONLY for testing purposes. You don’t want to run one node in production even just to start out. To get the benefit of Cassandra’s architecture, which is designed to support linear scalability. You should be running a Cassandra cluster with at least three nodes.</p>
<p>For more information:</p>
<ul>
<li><a href="http://planetcassandra.org/blog/post/cassandra-faq-can-i-start-with-a-single-node/">Cassandra FAQ: Can I Start With a Single Node?</a></li>
<li><a href="http://stackoverflow.com/questions/18462530/why-dont-you-start-off-with-a-single-small-cassandra-server-as-you-usually">Why don’t you start off with a “single &amp; small” Cassandra server</a></li>
</ul>
<h2 id="requirements">Requirements</h2>
<ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 1.7</a></li>
<li><a href="http://maven.apache.org/">Maven</a></li>
</ul>
<h2 id="download">Download</h2>
<p>Use GitHub to clone the <a href="https://github.com/apache/incubator-usergrid">apache/incubator-usergrid</a> repo.</p>
<p>Or you can start by <a href="https://github.com/apache/incubator-usergrid/archive/master.zip">downloading our latest code</a> and extract it.</p>
<h2 id="building">Building</h2>
<p>From the command line, navigate to stack directory and type the following:</p>
<pre><code>mvn clean package -DskipTests=true</code></pre>
<p>Once you are done the Usergrid application will be package as a Java EE WAR file at the location <strong>stack/rest/target/ROOT.war</strong>.</p>
<h2 id="install-and-configure-cassandra">Install and configure Cassandra</h2>
<p>Install Cassandra, don’t edit configuration files as we just want default values for this simple setup. Here are the <a href="http://wiki.apache.org/cassandra/GettingStarted">instructions for installing Cassandra</a></p>
<h2 id="install-and-configure-tomcat">Install and configure Tomcat</h2>
<p>Follow instructions, don’t edit configuration files as we just want default values for this simple setup. Here are the <a href="http://tomcat.apache.org/tomcat-7.0-doc/setup.html">instructions for installing Tomcat 7</a></p>
<h2 id="add-usergrid-war-to-tomcat">Add Usergrid WAR to Tomcat</h2>
<p>Remove the existing tomcat/webapps/ROOT directory.</p>
<p>Place the Usergrid ROOT.war file into the tomcat/webapps directory</p>
<h2 id="add-usergrid-configuration-file-to-tomcat">Add Usergrid configuration file to Tomcat</h2>
<p>Create a <strong>usergrid-deployment.properties</strong> file and place it in Tomcat’s <strong>lib</strong> directory. You can find an example properties file below that should work well for a local Tomcat &amp; Cassandra setup. You will probably only need to change the properties below to use your email address and preferred password for the install.</p>
<pre><code>usergrid.sysadmin.login.allowed=true
usergrid.sysadmin.login.name=superuser
usergrid.sysadmin.login.password=pw123
usergrid.sysadmin.email=me@example.com
usergrid.sysadmin.login.email=myself@example.com
usergrid.management.mailer=Myself&lt;myself@example.com&gt;
usergrid.test-account.admin-user.email=myself@example.com
usergrid.test-account.admin-user.password=test</code></pre>
<h2 id="run-usergrid-database-super-user-setup">Run Usergrid Database &amp; Super User Setup</h2>
<p>Start Tomcat and use your web browser to visit the URLs below. While you do this you might want to watch the logs under tomcat/logs for clues, just in case anything goes wrong.</p>
<p>Database setup URL - <a href="http://localhost:8080/system/database/setup">http://localhost:8080/system/database/setup</a></p>
<p>When prompted to login use the sysadmin credentials that you specified in your usergrid-deployment.properties file. Based on the example above that would be superuser and pw123. If the operation is successful you should a message like the one below in your browser. If not, check your logs for clues about what went wrong.</p>
<pre><code>{
  "action" : "cassandra setup",
  "status" : "ok",
  "timestamp" : 1379424622947,
  "duration" : 76
}</code></pre>
<p>Superuser setup URL - <a href="http://localhost:8080/system/superuser/setup">http://localhost:8080/system/superuser/setup</a></p>
<p>You should not be prompted for login because you already logged into for the Database Setup. If setup works, you should see a message like this:</p>
<pre><code>{
  "action" : "superuser setup",
  "status" : "ok",
  "timestamp" : 1379424667936,
  "duration" : 2
}</code></pre>
<h2 id="login-to-the-usergrid-console-get-started">Login to the Usergrid Console &amp; get started</h2>
<p>You should now be able to login to the Usergrid console and start configuring applications, users and more.</p>
<p>You can use an static version of the portal to get started:</p>
<p><a href="http://apigee.github.io/usergrid-portal/?api_url=http://localhost:8080">http://apigee.github.io/usergrid-portal/?api_url=http://localhost:8080</a></p>
<h2 id="example-usergrid-deployment.properties-file">Example usergrid-deployment.properties file</h2>
<p>Here’s a complete example properties file to get you started.</p>
<pre><code># Minimal Usergrid configuration properties for local Tomcat and Cassandra 
#
# The cassandra configuration options. 

# The cassandra host to use
cassandra.url=localhost:9160

# The strategy to use when creating the keyspace. This is the default. 
# We recommend creating the keyspace with this default, then editing it 
# via the cassandra CLI to meet the client's needs.
cassandra.keyspace.strategy=org.apache.cassandra.locator.SimpleStrategy
 
# The default replication factor for the simple strategy. Again, leave the 
# default, create the app, then use the cassandra cli to set the replication 
# factor options. This can become complicated with different topologies and 
# is more a Cassandra administration issue than a UG issue.
cassandra.keyspace.strategy.options.replication_factor=1
 
######################################################
# Custom mail transport. Not usually used for local testing

#mail.transport.protocol=smtps
#mail.smtps.host=email-smtp.us-east-1.amazonaws.com
#mail.smtps.port=465
#mail.smtps.auth=true
#mail.smtps.quitwait=false
#mail.smtps.username=
#mail.smtps.password=

######################################################
# Admin and test user setup (change these to be their super user

usergrid.sysadmin.login.name=superuser
usergrid.sysadmin.login.email=myself@example.com     &lt;--- Change this
usergrid.sysadmin.login.password=pw123               &lt;--- Change this
usergrid.sysadmin.login.allowed=true
usergrid.sysadmin.email=myself@example.com           &lt;--- Change this

# Enable or disable this to require superadmin approval of users
usergrid.sysadmin.approve.users=false

######################################################
# Auto-confirm and sign-up notifications settings

usergrid.management.admin_users_require_confirmation=false
usergrid.management.admin_users_require_activation=false
usergrid.management.organizations_require_activation=false
usergrid.management.notify_sysadmin_of_new_organizations=false
usergrid.management.notify_sysadmin_of_new_admin_users=false

######################################################
# URLs
# Redirect path when request come in for TLD

usergrid.redirect_root=https://localhost:8080/status
usergrid.view.management.organizations.organization.activate=https://localhost:8080/accounts/welcome
usergrid.view.management.organizations.organization.confirm=https://localhost:8080/accounts/welcome
usergrid.view.management.users.user.activate=https://localhost:8080/accounts/welcome
usergrid.view.management.users.user.confirm=https://localhost:8080/accounts/welcome
usergrid.organization.activation.url=https://localhost:8080/management/organizations/%s/activate
usergrid.admin.activation.url=https://localhost:8080/management/users/%s/activate
usergrid.admin.resetpw.url=https://localhost:8080/management/users/%s/resetpw
usergrid.admin.confirmation.url=https://localhost:8080/management/users/%s/confirm
usergrid.user.activation.url=https://localhost:8080%s/%s/users/%s/activate
usergrid.user.confirmation.url=https://localhost:8080/%s/%s/users/%s/confirm
usergrid.user.resetpw.url=https://localhost:8080/%s/%s/users/%s/resetpw</code></pre>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-9">
            <div class="github-callout">
                <strong>Questions?</strong> Please do <a href="/community">ask on the mailing-lists</a>!<br/>
                <!--
                <strong>Found an error?</strong> We’d greatly appreciate a pull request about <a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/deploy-local.md">this article on github</a>.</div> 
                -->
            </div>
        </div>
    </div>
</div>


<footer class="bf-footer" role="contentinfo">
    <div class="container">
        <div class="row">
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="/">Home</a></li>
                    <li class="nav-header"><a href="/community/">Community</a></li>
                        <li><a href="/community/#events">Events</a></li>
                        <li><a href="/community/#mailing-lists">Mailing Lists</a></li>
                        <li><a href="/community/#deployments">Deployments</a></li>
                        <li><a href="/community/#committers">Commiters</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="https://github.com/apache/incubator-usergrid/" target="_blank">Code</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack" target="_blank">Server Stack</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/portal" target="_blank">Admin Portal</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/ugc" target="_blank">ugc command line</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ios" target="_blank">iOS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/android" target="_blank">Android SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/html5-javascript" target="_blank">HTML5/JS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/nodejs" target="_blank">node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby-on-rails" target="_blank">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby" target="_blank">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/php" target="_blank">PHP SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/java" target="_blank">Java SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/dotnet" target="_blank">.NET / Windows SDK</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Resources</li>
                    <li><a href="http://github.com/apache/incubator-usergrid" target="_blank">GitHub Code</a></li>
                    <li><a href="http://usergrid.readthedocs.org/" target="_blank">Docs</a></li>
                    <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank">JIRA Bug Tracker</a></li>
                    <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank">StackOverflow</a></li>
                    <li><a href="/community/#live">Live Chat</a></li>
                    <li><a href="https://twitter.com/usergrid" target="_blank">Twitter</a></li>
                    <li><a href="http://incubator.apache.org/projects/usergrid.html" target="_blank">Podling Listing</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack#requirements" target="_blank">Getting Started</a></li>
                    <li><a href="https://cwiki.apache.org/confluence/display/usergrid/GitHub+Based+Contribution+Workflow" target="_blank">Contribution Guidelines</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Apache</li>
                    <li><a href="http://www.apache.org/licenses/" target="_blank">License</a></li>
                    <li><a href="http://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></li>
                    <li><a href="http://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></li>
                    <li><a href="http://www.apache.org/security/">Security</a></li>
                    <li><a href="http://www.apache.org/" target="_blank">Apache Foundation</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <a class="twitter-timeline" href="https://twitter.com/search?q=%23usergrid" data-widget-id="401499136807038976"  data-related="usergrid" height="400px" style="overflow:hidden">Tweets about "usergrid"</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div> 
        <!--
            <div class="col-md-4">
                <div class="input-group form-search">
                    <input type="text" class="form-control search-query">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" data-type="last">Search</button>
                    </span>
                </div>
            </div> -->
        </div> 
        <div class="row">
            <div id="copyright">
                <img src="/img/egg-logo.png" /><br/><br/>
                <p>Apache Usergrid is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator PMC. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
                <p>Copyright © 2013 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.<br>
                Apache and the Apache feather logos are trademarks of The Apache Software Foundation.</p>
                <p class="credits">Site designed & assembled with love by <a href="https://github.com/ryuneeee">@ryuneeee</a> + <a href="https://github.com/realbeast">@realbeast</a> + <a href="https://twitter.com/timanglade">@timanglade</a>.</p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="/js/head.js"></script>
<script type="text/javascript">
    head.js("/js/jquery-1.10.1.min.js", "/js/bootstrap.min.js", "/js/usergrid-site.js");
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45815079-1', 'apache.org');
  ga('send', 'pageview');

</script>



</body>
</html>
