<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Apache Usergrid (incubating) — Using the API</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta name="keywords" content="Apache Usergrid, Usergrid, BaaS, Backend-as-a-Service">
    <meta name="description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <meta property="og:title" content="Apache Usergrid" />
    <meta property="og:description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <!-- Loading Typekit -->
    <script type="text/javascript" src="//use.typekit.net/ddl7izx.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <!-- Loading Bootstrap -->
    <link href="/bootstrap/bootstrap.min.css" rel="stylesheet" type='text/css'>
    <link href="/css/bootflat.css" rel="stylesheet" type='text/css'>
    <link href="/css/usergrid-site.css" rel="stylesheet" type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,400,500,300,600,800,700,400italic,600italic,700italic,800italic,300italic" rel="stylesheet" type="text/css">
    <link href="/css/font-awesome.min.css" rel="stylesheet" type='text/css'>

    

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    <header class="navbar navbar-inverse navbar-fixed-top bf-docs-nav secondary" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bf-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <a href="/" class="navbar-brand">
                <img id="home-logo" src="/img/apache_usergrid_logo_white_small.png" />
            </a>
        <nav class="collapse navbar-collapse bf-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                <li class=""><a href="/community/"><span class="icns icon-group"></span></a></li>
                <li><a href="http://usergrid.readthedocs.org/" target="_blank"><span class="icns icon-book"></span></a></li>
                <li><a href="http://github.com/apache/incubator-usergrid" target="_blank"><span class="icns icon-github-sign"></span></a></li>
                <!--<li><a href="https://trello.com/b/exQmJIOn/usergrid" target="_blank"><span class="icns icon-trello"></span></a></li>-->
                <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank"><span class="icns icon-bug"></span></a></li>
                <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank"><span class="icns icon-stackexchange"></span></a></li>
                <li><a href="/community/#live"><span class="icns icon-comments"></span></a></li>
                <!--<li><a href="https://groups.google.com/forum/#!forum/usergrid" target="_blank"><span class="icns icon-envelope"></span></a></li>-->
                <li><a href="https://twitter.com/usergrid" target="_blank"><span class="icns icon-twitter"></span></a></li>
                <li><a href="https://cwiki.apache.org/confluence/display/usergrid/" target="_blank"><span class="icns icon-wiki"></span></a></li>
                <li><a href="/releases/"><span class="icns icon-releases"></span></a></li>
            </ul>
        </nav>
    </div>
    </header>



<div class="container bf-docs-container">    
    <div class="row">
        <div class="col-md-3">
            <div class="bf-sidebar hidden-print" role="complementary">
                <ul class="nav nav-list">
                    <li><a href="/docs/getting-up-and-running-locally/">Getting Up &amp; Running Locally</a></li>
                    <li><a href="/docs/deploy-local/">Deploying to local Tomcat &amp; Cassandra</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/ugc#usergrid-command-line-ugc"><code>ugc</code> — the Command-line Client</a></li>

                    <li class="nav-header"><span>Concepts</span></li>
                    <li>
                        <a href="/docs/organizations-admins/">Organizations & Admins</a>
                        <ul>
                            <li>
                                <a href="/docs/applications/">Applications</a>
                                <ul>
                                    <li><a href="/docs/roles-and-permissions/">Roles & Permissions</a></li>
                                    <!--<li><a href="#">Queues</a></li>-->
                                    <li><a href="/docs/events-and-counters/">Events & Counters</a></li>
                                    <li><a href="/docs/relationships/">Relationships (Joins)</a></li>
                                    <li>
                                        <a href="/docs/collections">Collections</a>
                                        <ul>
                                            <li><a href="/docs/query-language/">Query Language</a></li>
                                            <li><a href="/docs/users-devices/">Users & Devices</a></li>
                                            <li><a href="/docs/groups/">Groups</a></li>
                                            <li><a href="/docs/activities/">Activities</a></li>
                                            <li><a href="/docs/assets/">Assets</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>


                    <li class="nav-header"><span>Usage</span></li>
                    <!-- <li>REST API — Coming Soon</li> -->
                    <li><a class="icns-apple" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ios">iOS SDK</a></li>
                    <li><a class="icns-android" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/android">Android SDK</a></li>
                    <li><a class="icns-html5" href="">HTML5 / JavaScript SDK</a></li>
                    <li><a class="icns-windows" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/dotnet">Windows 8 / Windows Phone / .net SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/nodejs">Node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby-on-rails">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/php">PHP library</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/java">Java library</a></li>

                    <!--<li class="nav-header"><span>Internals</span></li>
                    <li>Design & Goals — Coming Soon</li>
                    <li>Java Architecture — Coming Soon</li>
                    <li>Cassandra Schema — Coming Soon</li>-->

                    <li class="nav-header"><span>Operations</span></li>
                    <!--<li>Deploying — Coming Soon</li>-->
                    <!-- <li>Monitoring — Coming Soon</li> -->
                    <li><a href="/docs/upgrading/">Upgrading</a></li>
                    <!-- <li>Security — Coming Soon</li> -->

                    <li class="nav-header"><span>Presentations & Videos</span></li>
                    <li><a href="/docs/presentations/">Presentations</a></li>
                    <li><a href="/docs/videos/">Videos</a></li>

                    <li class="nav-header"><span>We need your help!</span></li>
                    <li><a href="/docs/contribute-code/">How to Contribute Code & Docs</a></li>
                    <!--
                    <li><a href="/docs/contribute-docs">How to contribute docs</a></li>
                    -->
                </ul>
            </div>
        </div>

        <div class="col-md-9 main-article" role="main">
            <div class="page-article">
                <div class="page-header">
                    <h1>Using the API</h1>
                    <!-- TODO: reenable this when we sync SVN to GitHub
                  <small><a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/using-api.md">contribute to this article on github</a></small>
                    -->
                </div>
                <div class="toc">
	<ul>
<li>
<a href="#using-the-api">Using the API</a><ul>
<li><a href="#basic-api-request-construction">Basic API request construction</a></li>
<li><a href="#accessing-collections">Accessing collections</a></li>
<li><a href="#accessing-entities">Accessing entities</a></li>
<li><a href="#issuing-queries">Issuing queries</a></li>
<li><a href="#format-of-response-data">Format of response data</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="using-the-api">Using the API</h1>
<p>Apache Usergrid uses a pure REST API. (See <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">Representational State Transfer</a> at Wikipedia for more information about the principles behind this type of API.)</p>
<p>A REST API is built as a collection of resources. Resource locations are described by paths that are related intrinsically to collections and entities in collections. When building a REST API, the challenge is to represent the data and the action upon the data as a path to a resource that can be created, retrieved, updated, or deleted. The HTTP methods POST, GET, PUT, and DELETE correspond to the actions that are applied to resources.</p>
<p>In forming Apache Usergrid API requests, resource paths are specified as URLs. For example, to cause the application my-app to retrieve data about a user named john.doe, you construct the following API request:</p>
<pre><code>https://api.usergrid.com/my-org/my-app/users/john.doe</code></pre>
<p>To get a listing of everything the user john.doe likes, use the following URL:</p>
<pre><code>https://api.usergrid.com/my-org/my-app/users/john.doe/likes</code></pre>
<p>To limit returned likes to entities of type restaurant, specify the following URL:</p>
<pre><code>https://api.usergrid.com/my-org/my-app/users/john.doe/likes/restaurant</code></pre>
<h2 id="basic-api-request-construction">Basic API request construction</h2>
<p>All Apache Usergrid API requests are made to <a href="https://api.usergrid.com/">https://api.usergrid.com</a>.</p>
<p>Apache Usergrid interprets the URL resource path as a list of names, UUIDs, or queries. The basic path format is:</p>
<pre><code>https://{hostname}/{org-uuid|org-name}/{app-uuid|app-name}/{collection-name}[/{entity-uuid|entity-name}]</code></pre>
<p>where {hostname} is https://api.usergrid.com.</p>
<p><strong>Note:</strong> You cannot mix UUIDs and names in the URL resource path. For example, the following is incorrect:</p>
<pre><code>https://api.usergrid.com/my-org/62de5d97-d28c-11e1-8d5c-12313b01d5c1/users/john.doe</code></pre>
<p>Either use names only in the URL resource path, like this:</p>
<pre><code>https://api.usergrid.com/my-org/my-app/users/john.doe</code></pre>
<p>or UUIDs only.</p>
<p>This section gives several examples of how to construct Apache Usergrid API requests. To focus on what’s important, the examples use an abbreviated path that starts after the application UUID, or application name. For example, instead of giving a fully qualified path name as in:</p>
<pre><code>https://api.usergrid.com/my-org/my-app/users</code></pre>
<p>the example simply lists this:</p>
<pre><code>/users</code></pre>
<p>However, remember that in almost all cases, HTTP requests must include the fully qualified URL, as well as an access token for authentication.</p>
<h2 id="accessing-collections">Accessing collections</h2>
<p>To access all entities in a collection, specify the path as follows:</p>
<pre><code>/users</code></pre>
<p>Such a request retrieves the first 10 entities in the collection /users sorted by their entity UUID.</p>
<h2 id="accessing-entities">Accessing entities</h2>
<p>To access an entity in a collection, specify the path as follows:</p>
<pre><code>/{collection}/{uuid|name}</code></pre>
<p>where {collection} is the collection name, and {uuid|name} is the entity’s uuid or name.</p>
<p>To access a user in the users collection, specify the path as follows:</p>
<pre><code>/users/{uuid|username|email_address}</code></pre>
<p>where {uuid|username|email_address} is the user’s uuid, username, or email address.</p>
<p>For example, the following request retrieves the entity named dino from the dogs collection:</p>
<pre><code>/dogs/dino</code></pre>
<p>Anytime a logged-in user makes a request, the user can substitute “me” for the uuid or username. For example, the following request retrieves the current user:</p>
<pre><code>/users/me</code></pre>
<p><strong>Note:</strong> The /users/me endpoint is accessible only if the user provides an access token with the request (see <a href="/authenticating-users-and-application-clients">Authenticating users and application clients</a>). If an access token is not provided with the request, that is, the user makes an anonymous (or “guest”) call, the system will not be able to determine which user to return as /users/me.</p>
<h2 id="issuing-queries">Issuing queries</h2>
<p>You can issue a query in an API request that retrieves items from a collection. Here is the typical format for queries:</p>
<pre><code>/{collection}?ql={query}</code></pre>
<p>where</p>
<p>{query} is a query in the query language.</p>
<p>For example, this request retrieves users whose Facebook first name is john:</p>
<pre><code>/users?ql=select * where facebook.first_name ='john'</code></pre>
<p>For further information about queries, see <a href="/queries-and-parameters">Queries and parameters</a>.</p>
<h2 id="format-of-response-data">Format of response data</h2>
<p>All API methods return a response object that typically contains an array of entities:</p>
<pre><code>{
  "entities" : [
    ...
  ]
}</code></pre>
<p>Not everything can be included inside the entity, and some of the data that gets associated with specific entities isn’t part of their persistent representation. This is metadata, and it can be part of the response as well as associated with a specific entity. Metadata is just an arbitrary key/value JSON structure.</p>
<p>For example:</p>
<pre><code>{
  "entities" : {
    {
      "name" : "ed",
      "metadata" : {
        "collections" : ["activities", "groups", "followers"]
      }
    }
  },
  "metadata" : {
    "foo" : ["bar", "baz"]
  }
}</code></pre>
<p>Here’s a full example of the response object with one entity in the response (note that the Facebook property, which contains the entire Facebook profile of the user, is not displayed in the example due to its size):</p>
<pre><code>{
  "action" : "get",
  "application" : "ddde7630-90b1-11e0-b91b-12313f0204bb",
  "params" : { },
  "path" : "/users",
  "uri" : "https://api.usergrid.com/b91b-12313f0204bb-ddde7630-90b1-11e0/ddde7630-90b1-11e0-b91b-12313f0204bb/users",

  "entities" : [
    {
      "created" : 1307415547108000,
      "facebook" : { ... },
      "uuid" : "1c18ca40-90b2-11e0-b91b-12313f0204bb",
      "metadata" : {
        "path" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb",
        "collections" : {
          "activities" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/activities",
          "feed" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/feed",
          "groups" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/groups",
          "messages" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/messages",
          "queue" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/queue",
          "roles" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/roles",
          "following" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/following",
          "followers" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/followers"
        },
        "sets" : {
          "rolenames" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/rolenames",
          "permissions" : "/users/1c18ca40-90b2-11e0-b91b-12313f0204bb/permissions"
        }
      },
      "modified" : 1307415547108000,
      "name" : "John Doe",
      "picture" : "https://profile.ak.fbcdn.net/hprofile-ak-snc4/41501_217925_2656_q.jpg",
      "type" : "user",
      "username" : "john.doe"
    }
  ],
  "timestamp" : 1309218486419,
  "duration" : 40
}</code></pre>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-9">
            <div class="github-callout">
                <strong>Questions?</strong> Please do <a href="/community">ask on the mailing-lists</a>!<br/>
                <!--
                <strong>Found an error?</strong> We’d greatly appreciate a pull request about <a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/using-api.md">this article on github</a>.</div> 
                -->
            </div>
        </div>
    </div>
</div>


<footer class="bf-footer" role="contentinfo">
    <div class="container">
        <div class="row">
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="/">Home</a></li>
                    <li class="nav-header"><a href="/community/">Community</a></li>
                        <li><a href="/community/#events">Events</a></li>
                        <li><a href="/community/#mailing-lists">Mailing Lists</a></li>
                        <li><a href="/community/#deployments">Deployments</a></li>
                        <li><a href="/community/#committers">Commiters</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="https://github.com/apache/incubator-usergrid/" target="_blank">Code</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack" target="_blank">Server Stack</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/portal" target="_blank">Admin Portal</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/ugc" target="_blank">ugc command line</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ios" target="_blank">iOS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/android" target="_blank">Android SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/html5-javascript" target="_blank">HTML5/JS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/nodejs" target="_blank">node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby-on-rails" target="_blank">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby" target="_blank">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/php" target="_blank">PHP SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/java" target="_blank">Java SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/dotnet" target="_blank">.NET / Windows SDK</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Resources</li>
                    <li><a href="http://github.com/apache/incubator-usergrid" target="_blank">GitHub Code</a></li>
                    <li><a href="http://usergrid.readthedocs.org/" target="_blank">Docs</a></li>
                    <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank">JIRA Bug Tracker</a></li>
                    <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank">StackOverflow</a></li>
                    <li><a href="/community/#live">Live Chat</a></li>
                    <li><a href="https://twitter.com/usergrid" target="_blank">Twitter</a></li>
                    <li><a href="http://incubator.apache.org/projects/usergrid.html" target="_blank">Podling Listing</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack#requirements" target="_blank">Getting Started</a></li>
                    <li><a href="https://cwiki.apache.org/confluence/display/usergrid/GitHub+Based+Contribution+Workflow" target="_blank">Contribution Guidelines</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Apache</li>
                    <li><a href="http://www.apache.org/licenses/" target="_blank">License</a></li>
                    <li><a href="http://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></li>
                    <li><a href="http://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></li>
                    <li><a href="http://www.apache.org/security/">Security</a></li>
                    <li><a href="http://www.apache.org/" target="_blank">Apache Foundation</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <a class="twitter-timeline" href="https://twitter.com/search?q=%23usergrid" data-widget-id="401499136807038976"  data-related="usergrid" height="400px" style="overflow:hidden">Tweets about "usergrid"</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div> 
        <!--
            <div class="col-md-4">
                <div class="input-group form-search">
                    <input type="text" class="form-control search-query">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" data-type="last">Search</button>
                    </span>
                </div>
            </div> -->
        </div> 
        <div class="row">
            <div id="copyright">
                <img src="/img/egg-logo.png" /><br/><br/>
                <p>Apache Usergrid is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator PMC. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
                <p>Copyright © 2013 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.<br>
                Apache and the Apache feather logos are trademarks of The Apache Software Foundation.</p>
                <p class="credits">Site designed & assembled with love by <a href="https://github.com/ryuneeee">@ryuneeee</a> + <a href="https://github.com/realbeast">@realbeast</a> + <a href="https://twitter.com/timanglade">@timanglade</a>.</p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="/js/head.js"></script>
<script type="text/javascript">
    head.js("/js/jquery-1.10.1.min.js", "/js/bootstrap.min.js", "/js/usergrid-site.js");
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45815079-1', 'apache.org');
  ga('send', 'pageview');

</script>



</body>
</html>
