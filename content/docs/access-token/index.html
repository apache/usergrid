<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Apache Usergrid (incubating) — Access token</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta name="keywords" content="Apache Usergrid, Usergrid, BaaS, Backend-as-a-Service">
    <meta name="description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <meta property="og:title" content="Apache Usergrid" />
    <meta property="og:description" content="An open-source Backend-as-a-Service stack for web & mobile applications, based on RESTful APIs." />
    <!-- Loading Typekit -->
    <script type="text/javascript" src="//use.typekit.net/ddl7izx.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <!-- Loading Bootstrap -->
    <link href="/bootstrap/bootstrap.min.css" rel="stylesheet" type='text/css'>
    <link href="/css/bootflat.css" rel="stylesheet" type='text/css'>
    <link href="/css/usergrid-site.css" rel="stylesheet" type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,400,500,300,600,800,700,400italic,600italic,700italic,800italic,300italic" rel="stylesheet" type="text/css">
    <link href="/css/font-awesome.min.css" rel="stylesheet" type='text/css'>

    

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    <header class="navbar navbar-inverse navbar-fixed-top bf-docs-nav secondary" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bf-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <a href="/" class="navbar-brand">
                <img id="home-logo" src="/img/apache_usergrid_logo_white_small.png" />
            </a>
        <nav class="collapse navbar-collapse bf-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                <li class=""><a href="/community/"><span class="icns icon-group"></span></a></li>
                <li><a href="http://usergrid.readthedocs.org/" target="_blank"><span class="icns icon-book"></span></a></li>
                <li><a href="http://github.com/apache/incubator-usergrid" target="_blank"><span class="icns icon-github-sign"></span></a></li>
                <!--<li><a href="https://trello.com/b/exQmJIOn/usergrid" target="_blank"><span class="icns icon-trello"></span></a></li>-->
                <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank"><span class="icns icon-bug"></span></a></li>
                <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank"><span class="icns icon-stackexchange"></span></a></li>
                <li><a href="/community/#live"><span class="icns icon-comments"></span></a></li>
                <!--<li><a href="https://groups.google.com/forum/#!forum/usergrid" target="_blank"><span class="icns icon-envelope"></span></a></li>-->
                <li><a href="https://twitter.com/usergrid" target="_blank"><span class="icns icon-twitter"></span></a></li>
                <li><a href="https://cwiki.apache.org/confluence/display/usergrid/" target="_blank"><span class="icns icon-wiki"></span></a></li>
                <li><a href="/releases/"><span class="icns icon-releases"></span></a></li>
            </ul>
        </nav>
    </div>
    </header>



<div class="container bf-docs-container">    
    <div class="row">
        <div class="col-md-3">
            <div class="bf-sidebar hidden-print" role="complementary">
                <ul class="nav nav-list">
                    <li><a href="/docs/getting-up-and-running-locally/">Getting Up &amp; Running Locally</a></li>
                    <li><a href="/docs/deploy-local/">Deploying to local Tomcat &amp; Cassandra</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/ugc#usergrid-command-line-ugc"><code>ugc</code> — the Command-line Client</a></li>

                    <li class="nav-header"><span>Concepts</span></li>
                    <li>
                        <a href="/docs/organizations-admins/">Organizations & Admins</a>
                        <ul>
                            <li>
                                <a href="/docs/applications/">Applications</a>
                                <ul>
                                    <li><a href="/docs/roles-and-permissions/">Roles & Permissions</a></li>
                                    <!--<li><a href="#">Queues</a></li>-->
                                    <li><a href="/docs/events-and-counters/">Events & Counters</a></li>
                                    <li><a href="/docs/relationships/">Relationships (Joins)</a></li>
                                    <li>
                                        <a href="/docs/collections">Collections</a>
                                        <ul>
                                            <li><a href="/docs/query-language/">Query Language</a></li>
                                            <li><a href="/docs/users-devices/">Users & Devices</a></li>
                                            <li><a href="/docs/groups/">Groups</a></li>
                                            <li><a href="/docs/activities/">Activities</a></li>
                                            <li><a href="/docs/assets/">Assets</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>


                    <li class="nav-header"><span>Usage</span></li>
                    <!-- <li>REST API — Coming Soon</li> -->
                    <li><a class="icns-apple" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ios">iOS SDK</a></li>
                    <li><a class="icns-android" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/android">Android SDK</a></li>
                    <li><a class="icns-html5" href="">HTML5 / JavaScript SDK</a></li>
                    <li><a class="icns-windows" href="https://github.com/apache/incubator-usergrid/tree/master/sdks/dotnet">Windows 8 / Windows Phone / .net SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/nodejs">Node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/ruby-on-rails">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/php">PHP library</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/tree/master/sdks/java">Java library</a></li>

                    <!--<li class="nav-header"><span>Internals</span></li>
                    <li>Design & Goals — Coming Soon</li>
                    <li>Java Architecture — Coming Soon</li>
                    <li>Cassandra Schema — Coming Soon</li>-->

                    <li class="nav-header"><span>Operations</span></li>
                    <!--<li>Deploying — Coming Soon</li>-->
                    <!-- <li>Monitoring — Coming Soon</li> -->
                    <li><a href="/docs/upgrading/">Upgrading</a></li>
                    <!-- <li>Security — Coming Soon</li> -->

                    <li class="nav-header"><span>Presentations & Videos</span></li>
                    <li><a href="/docs/presentations/">Presentations</a></li>
                    <li><a href="/docs/videos/">Videos</a></li>

                    <li class="nav-header"><span>We need your help!</span></li>
                    <li><a href="/docs/contribute-code/">How to Contribute Code & Docs</a></li>
                    <!--
                    <li><a href="/docs/contribute-docs">How to contribute docs</a></li>
                    -->
                </ul>
            </div>
        </div>

        <div class="col-md-9 main-article" role="main">
            <div class="page-article">
                <div class="page-header">
                    <h1>Access token</h1>
                    <!-- TODO: reenable this when we sync SVN to GitHub
                  <small><a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/access-token.md">contribute to this article on github</a></small>
                    -->
                </div>
                <div class="toc">
	<ul>
<li>
<a href="#access-token">Access token</a><ul>
<li>
<a href="#requesting-an-access-token">Requesting an access token</a><ul>
<li><a href="#request-uri">Request URI</a></li>
<li><a href="#parameters">Parameters</a></li>
<li><a href="#example---request-application-user">Example - Request (Application user)</a></li>
<li><a href="#example---response">Example - Response</a></li>
<li><a href="#example---request-admin-user">Example - Request (Admin user)</a></li>
<li><a href="#example---response-1">Example - Response</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="access-token">Access token</h1>
<p><a href="/docs/usergrid/content/management-resources">See all management resources</a><a href="/docs/usergrid/content/management-resources"><img src="/docs/sites/docs/files/learnmore%20arrow_0.png"></a></p>
<p>An access token carries the credentials and authorization information needed to access other resources through the Apache Usergrid API. Using the API, you can obtain an access token.</p>
<h2 id="requesting-an-access-token">Requesting an access token</h2>
<p>Use the POST method to obtain an access token.</p>
<h3 id="request-uri">Request URI</h3>
<p>The request URL depends on the access type:</p>
<table>
<thead>
<tr class="header">
<th align="left">Access Type</th>
<th align="left">Request URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Application user</td>
<td align="left">POST /&lt;org_id&gt;/&lt;app_id&gt;/token ‘{“grant_type”:“password”, “username”:“&lt;username&gt;”, “password”:“&lt;password&gt;”[, “ttl”:“&lt;token_time_to_live&gt;”]}’</td>
</tr>
<tr class="even">
<td align="left">Application</td>
<td align="left">POST /&lt;org_id&gt;/&lt;app_id&gt;/token ‘{“grant_type”:“client_credentials”, “client_id”:“&lt;client_id&gt;”, “client_secret”:“&lt;client_secret&gt;”[, “ttl”:“&lt;token_time_to_live&gt;”]}’</td>
</tr>
<tr class="odd">
<td align="left">Admin User</td>
<td align="left">POST /token ‘{“grant_type”:“password”, “username”:“&lt;username&gt;”, “password”:“&lt;password&gt;”[, “ttl”:“&lt;token_time_to_live&gt;”]}’</td>
</tr>
<tr class="even">
<td align="left">Organization</td>
<td align="left">POST /token ‘{“grant_type”:“client_credentials”, “client_id”:“&lt;client_id&gt;”, “client_secret”:“&lt;client_secret&gt;”}’</td>
</tr>
</tbody>
</table>
<p>See <a href="/authenticating-users-and-application-clients">Authenticating users and application clients</a> for further details about access types.</p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr class="header">
<th align="left">Parameter Name</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">client_id</td>
<td align="left">string</td>
<td align="left">Organization client ID. You can find this in the admin portal.</td>
</tr>
<tr class="even">
<td align="left">client_secret</td>
<td align="left">string</td>
<td align="left">Organization client secret. You can find this in the admin portal</td>
</tr>
<tr class="odd">
<td align="left">username</td>
<td align="left">string</td>
<td align="left">Value of the User entity username property. </td>
</tr>
<tr class="even">
<td align="left">password</td>
<td align="left">string</td>
<td align="left">Password stored for this user.</td>
</tr>
<tr class="odd">
<td align="left">ttl</td>
<td align="left">long</td>
<td align="left">
<em>Optional.</em> The amount of time, in miliseconds, that this token will be valid before authentication is required again. This must be less than the accesstokenttl property of the application entity the token is being requested for.</td>
</tr>
</tbody>
</table>
<p> </p>
<h3 id="example---request-application-user">Example - Request (Application user)</h3>
<ul>
<li><a href="#curl_get_token_appuser">cURL</a></li>
<li><a href="#javascript_get_token_appuser">JavaScript (HTML5)</a></li>
<li><a href="#ruby_get_token_appuser">Ruby</a></li>
<li><a href="#nodejs_get_token_appuser">Node.js</a></li>
</ul>
<!-- -->

<pre><code>curl -X POST -i -H "Content-Type: application/json" “https://api.usergrid.com/&lt;org_name&gt;/&lt;app_name&gt;/token”  -d '{"grant_type":"password","username":"testadmin","password":"testadminpw"}'</code></pre>
<p>The example assumes use of the <a href="https://github.com/apigee/usergrid-javascript-sdk">JavaScript (HTML5) SDK</a>.</p>
<pre><code>var username = 'testuser';
var password = 'testpasswd';
client.login(username, password,
    function (err) {
        if (err) {
            //error — could not log user in
        } else {
            //success — user has been logged in
            var token = client.token;
        }
    }
);</code></pre>
<p>The example assumes use of the <a href="https://github.com/scottganyo/usergrid_iron">Ruby SDK</a>.</p>
<pre><code>app = Usergrid::Application.new 'https://api.usergrid.com/my-org/my-app/'
app.login 'testuser', 'testpasswd'
token = app.auth_token</code></pre>
<p>The example assumes use of the <a href="https://github.com/apigee/usergrid-node-module">Node.js module</a>.</p>
<pre><code>var username = 'testuser';
var password = 'testpasswd';
client.login(username, password,
    function (err) {
        if (err) {
            //error — could not log user in
        } else {
            //success — user has been logged in
            var token = client.token;
        }
    }
);</code></pre>
<h3 id="example---response">Example - Response</h3>
<pre><code>{
  "access_token": "5wuGd-lcEeCUBwBQVsAACA:F8zeMOlcEeCUBwBQVsAACA:YXU6AAABMq0hdy4Lh0ewmmnOWOR-DaepCrpWx9oPmw",
  "expires_in": 3600,
  "user": {
    "uuid": "e70b8677-e95c-11e0-9407-005056c00008",
    "type": "user",
    "username": "testuser",
    "email": "testuser@mail.com",
    "activated": true,
    "created": 1317164604367013,
    "modified": 1317164604367013
  }</code></pre>
<h3 id="example---request-admin-user">Example - Request (Admin user)</h3>
<ul>
<li><a href="#curl_get_token_adminuser">cURL</a></li>
<li><a href="#javascript_get_token_adminuser">JavaScript (HTML5)</a></li>
<li><a href="#ruby_get_token_adminuser">Ruby</a></li>
<li><a href="#nodejs_get_token_adminuser">Node.js</a></li>
</ul>
<!-- -->

<pre><code>curl -X POST -i -H "Content-Type: application/json" “https://api.usergrid.com/management/token”  -d '{"grant_type":"password","username":"testadmin","password":"testadminpw"}'</code></pre>
<p>It is recommended that you use the <a href="http://apigee.com/usergrid">Admin Portal</a> for administrative activities instead of using JavaScript to do them programmatically in your app.</p>
<p><strong>Note:</strong>You can see the response below in the Admin Portal by using the <a href="/docs/usergrid/content/displaying-app-services-api-calls-curl-commands">JavaScript Console</a>.</p>
<p>The example assumes use of the <a href="https://github.com/scottganyo/usergrid_iron">Ruby SDK</a>.</p>
<pre><code>mgmt = Usergrid::Management.new 'https://api.usergrid.com/'
mgmt.login test, testpass
token = mgmt.auth_token</code></pre>
<p>The example assumes use of the <a href="https://github.com/apigee/usergrid-node-module">Node.js module</a>.</p>
<pre><code>var username = 'testuser';
var password = 'testpasswd';
client.login(username, password,
    function (err) {
        if (err) {
            //error — could not log admin user in
        } else {
            //success — admin user has been logged in
            var token = client.token;
        }
    }
);</code></pre>
<h3 id="example---response-1">Example - Response</h3>
<pre><code>{
  "access_token": "f_GUbelXEeCfRgBQVsAACA:YWQ6AAABMqz_xUyYeErOkKjnzN7YQXXlpgmL69fvaA",
  "expires_in": 3600,
  "user": {
    "username": "test",
    "email": "test@usergrid.com",
    "organizations": {
      "test-organization": {
        "users": {
          "test": {
            "name": "Test User",
            "disabled": false,
            "uuid": "7ff1946d-e957-11e0-9f46-005056c00008",
            "activated": true,
            "username": "test",
            "applicationId": "00000000-0000-0000-0000-000000000001",
            "email": "test@usergrid.com",
            "adminUser": true,
            "mailTo": "Test User "
          }
        },
        "name": "test-organization",
        "applications": {
          "test-app": "8041893b-e957-11e0-9f46-005056c00008"
        },
        "uuid": "800b8510-e957-11e0-9f46-005056c00008"
      }
    },
    "adminUser": true,
    "activated": true,
    "name": "Test User",
    "mailTo": "Test User ",
    "applicationId": "00000000-0000-0000-0000-000000000001",
    "uuid": "7ff1946d-e957-11e0-9f46-005056c00008",
    "disabled": false
  }
}</code></pre>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-9">
            <div class="github-callout">
                <strong>Questions?</strong> Please do <a href="/community">ask on the mailing-lists</a>!<br/>
                <!--
                <strong>Found an error?</strong> We’d greatly appreciate a pull request about <a target="_blank" href="https://github.com/usergrid/website/blob/master/content/docs/access-token.md">this article on github</a>.</div> 
                -->
            </div>
        </div>
    </div>
</div>


<footer class="bf-footer" role="contentinfo">
    <div class="container">
        <div class="row">
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="/">Home</a></li>
                    <li class="nav-header"><a href="/community/">Community</a></li>
                        <li><a href="/community/#events">Events</a></li>
                        <li><a href="/community/#mailing-lists">Mailing Lists</a></li>
                        <li><a href="/community/#deployments">Deployments</a></li>
                        <li><a href="/community/#committers">Commiters</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header"><a href="https://github.com/apache/incubator-usergrid/" target="_blank">Code</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack" target="_blank">Server Stack</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/portal" target="_blank">Admin Portal</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/ugc" target="_blank">ugc command line</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ios" target="_blank">iOS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/android" target="_blank">Android SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/html5-javascript" target="_blank">HTML5/JS SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/nodejs" target="_blank">node.js module</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby-on-rails" target="_blank">Ruby on Rails gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/ruby" target="_blank">Ruby gem</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/php" target="_blank">PHP SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/java" target="_blank">Java SDK</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/sdks/dotnet" target="_blank">.NET / Windows SDK</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Resources</li>
                    <li><a href="http://github.com/apache/incubator-usergrid" target="_blank">GitHub Code</a></li>
                    <li><a href="http://usergrid.readthedocs.org/" target="_blank">Docs</a></li>
                    <li><a href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=23&view=planning&selectedIssue=USERGRID-362&epics=visible" target="_blank">JIRA Bug Tracker</a></li>
                    <li><a href="http://stackoverflow.com/search?q=usergrid" target="_blank">StackOverflow</a></li>
                    <li><a href="/community/#live">Live Chat</a></li>
                    <li><a href="https://twitter.com/usergrid" target="_blank">Twitter</a></li>
                    <li><a href="http://incubator.apache.org/projects/usergrid.html" target="_blank">Podling Listing</a></li>
                    <li><a href="https://github.com/apache/incubator-usergrid/blob/master/stack#requirements" target="_blank">Getting Started</a></li>
                    <li><a href="https://cwiki.apache.org/confluence/display/usergrid/GitHub+Based+Contribution+Workflow" target="_blank">Contribution Guidelines</a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <ul class="nav nav-list">
                    <li class="nav-header">Apache</li>
                    <li><a href="http://www.apache.org/licenses/" target="_blank">License</a></li>
                    <li><a href="http://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></li>
                    <li><a href="http://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></li>
                    <li><a href="http://www.apache.org/security/">Security</a></li>
                    <li><a href="http://www.apache.org/" target="_blank">Apache Foundation</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <a class="twitter-timeline" href="https://twitter.com/search?q=%23usergrid" data-widget-id="401499136807038976"  data-related="usergrid" height="400px" style="overflow:hidden">Tweets about "usergrid"</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div> 
        <!--
            <div class="col-md-4">
                <div class="input-group form-search">
                    <input type="text" class="form-control search-query">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" data-type="last">Search</button>
                    </span>
                </div>
            </div> -->
        </div> 
        <div class="row">
            <div id="copyright">
                <img src="/img/egg-logo.png" /><br/><br/>
                <p>Apache Usergrid is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator PMC. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
                <p>Copyright © 2013 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.<br>
                Apache and the Apache feather logos are trademarks of The Apache Software Foundation.</p>
                <p class="credits">Site designed & assembled with love by <a href="https://github.com/ryuneeee">@ryuneeee</a> + <a href="https://github.com/realbeast">@realbeast</a> + <a href="https://twitter.com/timanglade">@timanglade</a>.</p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="/js/head.js"></script>
<script type="text/javascript">
    head.js("/js/jquery-1.10.1.min.js", "/js/bootstrap.min.js", "/js/usergrid-site.js");
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45815079-1', 'apache.org');
  ga('send', 'pageview');

</script>



</body>
</html>
